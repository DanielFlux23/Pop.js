class Pop{constructor(e={},t=[]){return this.blocos=e,this.chaves=Object.keys(e),this.set={},this.clonagens={},this.animacoes={},this.init("initPop"===t?this.chaves:t),this}init(e=[],{text:t="",data:o=null,force:s=!1,target:n=document.body,onRender:r=null}={}){for(let s of e){let e;if(s.includes("&")){const n=s.replace("&",""),r=this.clonagens[n]=(this.clonagens[n]||0)+1;e=t??this.blocos[n](o),s=`${n}${r}`,this.add(s,this.blocos[n])}if(!this.blocos[s]||document.getElementById(s))continue;const a=document.createElement("div");a.id=s,e=s.includes("$")?this.id(this.blocos[s](o)):t||this.blocos[s](o),e instanceof HTMLElement?a.appendChild(e):a.innerHTML=e,n.appendChild(a),r&&r(a,s)}return this}init(e=[],{text:t="",data:o=null,force:s=!1,target:n=document.body,onRender:r=null}={}){for(let a of e){let e;const i=document.getElementById(a);if(!this.blocos[a]&&!a.includes("&"))continue;if(i&&!s)continue;i&&s&&i.remove();let c=a;if(a.includes("&")){const s=a.replace("&","");a=`${s}${this.clonagens[s]=(this.clonagens[s]||0)+1}`,this.add(a,this.blocos[s]),e=t??this.blocos[s](o)}else e=a.includes("$")?this.id(this.blocos[a](o)):t||this.blocos[a](o);const l=document.createElement("div");l.id=a,e instanceof HTMLElement?l.appendChild(e):l.innerHTML=e,n.appendChild(l),r&&r(l,c)}return this}add(e,t){if("object"==typeof e)for(let t in e)this.blocos[t]=e[t];else this.blocos[e]&&console.warn(`Bloco '${e}' já existe. Será sobrescrito.`),this.blocos[e]=t;return this.chaves=Object.keys(this.blocos),this}setVar(e,t){return Object.defineProperty(this.set,e,{get(){return this._valor},set(o){console.log([e]),t()}}),this.set}setShow(e,t){const o=this;Object.defineProperty(this.set,e,{get(){return this._valor},set(e){console.log(o)}})}clone(e,t){this.blocos[e]||console.warn("parece que este bloco não existir: "+e);const o=`${t||e}${this.clonagens[e]=(this.clonagens[e]||0)+1}`;this.add(o,this.blocos[e]),this.init([o],{text:this.blocos[e]()})}animar(e,t={}){this.animacoes[e]||(this.animacoes[e]={fila:[],emExecucao:!1}),this.animacoes[e].fila.push(t),this.animacoes[e].emExecucao||this._executarProxima(e)}_executarProxima(e){const t=this.animacoes[e];if(!t||0===t.fila.length)return void(t.emExecucao=!1);t.emExecucao=!0;const o=t.fila.shift(),s=document.getElementById(e);if(!s)return console.error(`Elemento com id "${e}" não encontrado.`),void this._executarProxima(e);const{type:n="fade",duration:r=500,easing:a="ease-in-out",delay:i=0,direction:c=0}=o,l=(()=>{switch(n){case"rotate":return[{transform:"rotate(0deg)"},{transform:`rotate(${isNaN(c)?360:Number(c)}deg)`}];case"scale":return[{transform:"scale(1)"},{transform:`scale(${isNaN(c)?1.5:Number(c)})`}];case"fade":default:return[{opacity:0},{opacity:1}];case"slide":return[{transform:{up:"translateY(-100%)",down:"translateY(100%)",left:"translateX(-100%)",right:"translateX(100%)"}[c]||"translateX(0)"},{transform:"translateX(0)"}];case"bounce":return[{transform:"translateY(0)"},{transform:`translateY(${isNaN(c)?20:10*Number(c)}px)`},{transform:"translateY(0)"}]}})(),h={duration:r,delay:i,easing:a,iterations:1,fill:"forwards"};s.animate(l,h).onfinish=()=>{t.emExecucao=!1,this._executarProxima(e)}}mover(e,t={}){const o=this.$$(e);if(!o)return console.error(`Elemento ${e} não encontrado`);let s={x:0,y:0},n=!1;Object.keys(t).forEach((e=>{const r=t[e];r&&"object"==typeof r&&(r.x=r.x??0,r.y=r.y??0,r.ax=r.ax??0,r.ay=r.ay??0,r.delay=r.delay??1e3,r.minX=r.minX??-1/0,r.maxX=r.maxX??1/0,r.minY=r.minY??-1/0,r.maxY=r.maxY??1/0,r.friccao=r.friccao??1,r.reset=r.reset??!1,r.pause=r.pause??!1,setInterval((()=>{n||r.pause||(r.ax*=r.friccao,r.ay*=r.friccao,s.x+=r.ax,s.y+=r.ay,s.x=Math.max(r.minX,Math.min(r.maxX,s.x)),s.y=Math.max(r.minY,Math.min(r.maxY,s.y)),o.style.transform=`translate(${s.x}px, ${s.y}px)`,r.reset&&setTimeout((()=>{s.x=r.x,s.y=r.y,o.style.transform=`translate(${s.x}px, ${s.y}px)`}),3e3))}),r.delay))})),this.pausar=()=>n=!0,this.continuar=()=>n=!1}style(e){return this.$$(e).style}evento(e,t,o){const s=document.querySelectorAll(e);0!==s.length?s.forEach((e=>e.addEventListener(t,o))):console.warn(`Nenhum elemento encontrado para o seletor: ${e}`)}id(e){try{if("string"==typeof e){if(e.includes("$")){const t=this.blocos[e]?.();return this.blocos[t]?.()||this._erro(e)}return this.blocos[e]?.()||this._erro(e)}if(Array.isArray(e)){const[t,o]=e;return(this.blocos[t]?.()||"")+(o?.()||"")}return this._erro(e)}catch(t){return`<span style="color:red;">Erro no bloco: ${e}</span>`}}_erro(e){return console.error(`Erro ao acessar o bloco: ${e}`),`<span style="color:red;">Erro ao acessar o bloco: ${e}</span>`}$(e){return document.querySelector(e)}$$(e){return document.getElementById(e)}remover(e=""){e>1&&e.forEach(((e,t)=>{document.getElementById(t[e]).remove()})),document.getElementById(e).remove()}show(e=[]){const t=[];e=e.length?e:this.chaves;for(const o of e){if(!this.blocos[o])continue;this._renderBlock(o)&&t.push(o)}return t}_renderBlock(e){const t=document.getElementById(e),o=this.blocos[e]();return t?(o instanceof HTMLElement?(t.innerHTML="",t.appendChild(o)):t.innerHTML=o,!0):(this.init([e]),!0)}}const state=()=>obj;let obj={};